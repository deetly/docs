

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Plotly NAV key figures example &#8212; deetly documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plotly express examples" href="../express/plotly_express_samples.html" />
    <link rel="prev" title="Dash example" href="../dash/dash.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  
  <h1 class="site-logo" id="site-title">deetly documentation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Introduction
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Get started
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro/altair_and_plotly.html">
   Basic example
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Bar charts
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../bars_population_pyramid.html">
   Plotly population pyramid
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/basic/bar_line_humdata.html">
   Bar and line charts. Covid-19 Humdata
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Interaction
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../dashboard/brush_bar.html">
   Bar chart brushed
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Dashboards
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../dashboard/multiplot_layout_with_plotly.html">
   Volcanos plotly example
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Maps
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/geojson/map_geojson_basic.html">
   Map from geoJSON (SSB and NAV data)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/geojson/map_geojson_covid.html">
   Map from JSONStat
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/geojson/map_geojson_humdata.html">
   Map from geoJSON (covid data)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/geojson/map_geojson_ssb_nav.html">
   GeoJSON Maps
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/geojson/map_geojson_nav_dagpenger.html">
   Altair example NAV dagpenger
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../altair/topojson/map_topojson_us_airports.html">
   Map from topoJSON (US airports)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../geojson/map_geojson_choropleth.html">
   GeoJSON to Choropleth
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../topojson/map_from_topojson_us_unemployment.html">
   Map from topoJSON. US Unemployment
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Maps 3D
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_nav_dagpenger.html">
   Altair example NAV dagpenger
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_nav_permitteringer.html">
   Pydeck example NAV permitteringer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_nav_permitteringer.html#get-data-from-nav-no">
   Get data from nav.no
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_nav_permitteringer.html#naeringer">
   Næringer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_norway.html">
   Map types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_example_norway.html#get-data-from-nav-no">
   Get data from nav.no
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_kommuner.html">
   Pydeck example kommuner
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../pydeck/pydeck_road_accidents.html">
   “Pydeck example road accidents”
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Markdown
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../markdown/markdown-test.html">
   Markdown view
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  PDF
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../pdf/pdf_test.html">
   PDF view demo
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Graphs
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../graphviz/about.html">
   Graphviz
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../cytoscape/about.html">
   Cytoscape
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Forcegraph
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-game-of-thrones-from-cosmosdb_n.html">
   Graph data from Gremlin
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-game-of-thrones-from-cosmosdb_n.html#mappings">
   Mappings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-game-of-thrones-from-cosmosdb_n.html#add-figure">
   Add figure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-teams.html">
   Graph data from json (teams)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-teams.html#mappings">
   Mappings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../forcegraph/forcegraph-teams.html#add-figure">
   Add figure
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Plotly
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../bars_population_pyramid.html">
   Plotly population pyramid
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../timeseries_rangebreak.html">
   Timeseries with rangebreak
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dash/dash.html">
   Dash example
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Plotly NAV key figures example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../express/plotly_express_samples.html">
   Plotly express examples
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Process mining
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../process-mining/process_mining_pm4py.html">
   Process mining with pm4py
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Wordcloud
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../wordcloud/vega_wordcloud.html">
   Wordcloud with Vega
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/plotly/excel/nav_in_numbers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/deetly/site/master?urlpath=tree/plotly/excel/nav_in_numbers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/deetly/site/blob/master/plotly/excel/nav_in_numbers.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-datapackage">
   Create datapackage
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="plotly-nav-key-figures-example">
<h1>Plotly NAV key figures example<a class="headerlink" href="#plotly-nav-key-figures-example" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dataverk</span> <span class="k">as</span> <span class="nn">dv</span>
<span class="kn">from</span> <span class="nn">dataverk_tools.themes</span> <span class="kn">import</span> <span class="n">nav</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">plotly.io</span> <span class="k">as</span> <span class="nn">plio</span>
<span class="kn">import</span> <span class="nn">plotly_express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="k">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">squarify</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#plio.templates.default = nav_template</span>
<span class="n">px</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">nav</span><span class="o">.</span><span class="n">plotly_template</span>
<span class="n">px</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">color_continuous_scale</span> <span class="o">=</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navRodBla</span>
<span class="n">px</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">color_discrete_sequence</span> <span class="o">=</span> <span class="n">nav</span><span class="o">.</span><span class="n">discrete</span><span class="o">.</span><span class="n">navColors</span>
<span class="n">px</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.nav.no/no/NAV+og+samfunn/Statistikk/Flere+statistikkomrader/utbetalinger-til-personer-i-norge-per-fylke-og-kommune/_attachment/547717?_download=true&amp;_ts=169e812b918&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">HTTPError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="n">ac3ec3f87f89</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/pandas/io/excel/_base.py</span> in <span class="ni">read_excel</span><span class="nt">(io, sheet_name, header, names, index_col, usecols, squeeze, dtype, engine, converters, true_values, false_values, skiprows, nrows, na_values, keep_default_na, verbose, parse_dates, date_parser, thousands, comment, skipfooter, convert_float, mangle_dupe_cols, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">302</span> 
<span class="g g-Whitespace">    </span><span class="mi">303</span>     <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">ExcelFile</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">304</span>         <span class="n">io</span> <span class="o">=</span> <span class="n">ExcelFile</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">305</span>     <span class="k">elif</span> <span class="n">engine</span> <span class="ow">and</span> <span class="n">engine</span> <span class="o">!=</span> <span class="n">io</span><span class="o">.</span><span class="n">engine</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">306</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/pandas/io/excel/_base.py</span> in <span class="ni">__init__</span><span class="nt">(self, io, engine)</span>
<span class="g g-Whitespace">    </span><span class="mi">822</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_io</span> <span class="o">=</span> <span class="n">stringify_path</span><span class="p">(</span><span class="n">io</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">823</span> 
<span class="ne">--&gt; </span><span class="mi">824</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_reader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engines</span><span class="p">[</span><span class="n">engine</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">825</span> 
<span class="g g-Whitespace">    </span><span class="mi">826</span>     <span class="k">def</span> <span class="nf">__fspath__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/pandas/io/excel/_xlrd.py</span> in <span class="ni">__init__</span><span class="nt">(self, filepath_or_buffer)</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span>         <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">&quot;Install xlrd &gt;= 1.0.0 for Excel support&quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span>         <span class="n">import_optional_dependency</span><span class="p">(</span><span class="s2">&quot;xlrd&quot;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">err_msg</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">21</span>         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span> 
<span class="g g-Whitespace">     </span><span class="mi">23</span>     <span class="nd">@property</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/pandas/io/excel/_base.py</span> in <span class="ni">__init__</span><span class="nt">(self, filepath_or_buffer)</span>
<span class="g g-Whitespace">    </span><span class="mi">340</span>         <span class="c1"># If filepath_or_buffer is a url, load the data into a BytesIO</span>
<span class="g g-Whitespace">    </span><span class="mi">341</span>         <span class="k">if</span> <span class="n">is_url</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">342</span>             <span class="n">filepath_or_buffer</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">urlopen</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">343</span>         <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="p">(</span><span class="n">ExcelFile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workbook_class</span><span class="p">)):</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span>             <span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_filepath_or_buffer</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">)</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/pandas/io/common.py</span> in <span class="ni">urlopen</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span>     <span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="g g-Whitespace">    </span><span class="mi">140</span> 
<span class="ne">--&gt; </span><span class="mi">141</span>     <span class="k">return</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">142</span> 
<span class="g g-Whitespace">    </span><span class="mi">143</span> 

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">urlopen</span><span class="nt">(url, data, timeout, cafile, capath, cadefault, context)</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="n">opener</span> <span class="o">=</span> <span class="n">_opener</span>
<span class="ne">--&gt; </span><span class="mi">222</span>     <span class="k">return</span> <span class="n">opener</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span> 
<span class="g g-Whitespace">    </span><span class="mi">224</span> <span class="k">def</span> <span class="nf">install_opener</span><span class="p">(</span><span class="n">opener</span><span class="p">):</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">open</span><span class="nt">(self, fullurl, data, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">529</span>         <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="p">[]):</span>
<span class="g g-Whitespace">    </span><span class="mi">530</span>             <span class="n">meth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">531</span>             <span class="n">response</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">532</span> 
<span class="g g-Whitespace">    </span><span class="mi">533</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">http_response</span><span class="nt">(self, request, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>         <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>             <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">641</span>                 <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">642</span> 
<span class="g g-Whitespace">    </span><span class="mi">643</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">error</span><span class="nt">(self, proto, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">561</span>             <span class="n">http_err</span> <span class="o">=</span> <span class="mi">0</span>
<span class="g g-Whitespace">    </span><span class="mi">562</span>         <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">proto</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span> <span class="o">+</span> <span class="n">args</span>
<span class="ne">--&gt; </span><span class="mi">563</span>         <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_chain</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">564</span>         <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">565</span>             <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">_call_chain</span><span class="nt">(self, chain, kind, meth_name, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">501</span>         <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>             <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">503</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">504</span>             <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>                 <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">http_error_302</span><span class="nt">(self, req, fp, code, msg, headers)</span>
<span class="g g-Whitespace">    </span><span class="mi">753</span>         <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">754</span> 
<span class="ne">--&gt; </span><span class="mi">755</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">req</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">756</span> 
<span class="g g-Whitespace">    </span><span class="mi">757</span>     <span class="n">http_error_301</span> <span class="o">=</span> <span class="n">http_error_303</span> <span class="o">=</span> <span class="n">http_error_307</span> <span class="o">=</span> <span class="n">http_error_302</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">open</span><span class="nt">(self, fullurl, data, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">529</span>         <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="p">[]):</span>
<span class="g g-Whitespace">    </span><span class="mi">530</span>             <span class="n">meth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">531</span>             <span class="n">response</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">532</span> 
<span class="g g-Whitespace">    </span><span class="mi">533</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">http_response</span><span class="nt">(self, request, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>         <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>             <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">641</span>                 <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">642</span> 
<span class="g g-Whitespace">    </span><span class="mi">643</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">error</span><span class="nt">(self, proto, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">567</span>         <span class="k">if</span> <span class="n">http_err</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">568</span>             <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;http_error_default&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">orig_args</span>
<span class="ne">--&gt; </span><span class="mi">569</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_chain</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">570</span> 
<span class="g g-Whitespace">    </span><span class="mi">571</span> <span class="c1"># XXX probably also want an abstract factory that knows when it makes</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">_call_chain</span><span class="nt">(self, chain, kind, meth_name, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">501</span>         <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>             <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">503</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">504</span>             <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>                 <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/urllib/request.py</span> in <span class="ni">http_error_default</span><span class="nt">(self, req, fp, code, msg, hdrs)</span>
<span class="g g-Whitespace">    </span><span class="mi">647</span> <span class="k">class</span> <span class="nc">HTTPDefaultErrorHandler</span><span class="p">(</span><span class="n">BaseHandler</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">648</span>     <span class="k">def</span> <span class="nf">http_error_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">649</span>         <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">full_url</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">650</span> 
<span class="g g-Whitespace">    </span><span class="mi">651</span> <span class="k">class</span> <span class="nc">HTTPRedirectHandler</span><span class="p">(</span><span class="n">BaseHandler</span><span class="p">):</span>

<span class="ne">HTTPError</span>: HTTP Error 404: Not Found
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">5</span><span class="n">cc0934cc03c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mf">100.</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mf">100.</span>

    <span class="n">normed</span> <span class="o">=</span> <span class="n">squarify</span><span class="o">.</span><span class="n">normalize_sizes</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="n">rects</span> <span class="o">=</span> <span class="n">squarify</span><span class="o">.</span><span class="n">squarify</span><span class="p">(</span><span class="n">normed</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

    <span class="n">shapes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">annotations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">color</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
        <span class="n">shapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> 
            <span class="nb">dict</span><span class="p">(</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;rect&#39;</span><span class="p">,</span> 
                <span class="n">x0</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> 
                <span class="n">y0</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> 
                <span class="n">x1</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dx&#39;</span><span class="p">],</span> 
                <span class="n">y1</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dy&#39;</span><span class="p">],</span>
                <span class="n">line</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">),</span>
                <span class="n">fillcolor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">color</span><span class="p">]</span>
            <span class="p">)</span> 
        <span class="p">)</span>
        <span class="n">annotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dx&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dy&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">counter</span><span class="p">],</span>
                <span class="n">showarrow</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">color</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># For hover text</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dx&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rects</span> <span class="p">],</span> 
        <span class="n">y</span> <span class="o">=</span> <span class="p">[</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;dy&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rects</span> <span class="p">],</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">labels</span> <span class="p">],</span> 
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
    <span class="p">)]</span>


    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> 
        <span class="n">width</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
        <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">showgrid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">zeroline</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">showgrid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">zeroline</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">shapes</span><span class="o">=</span><span class="n">shapes</span><span class="p">,</span>
        <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
        <span class="n">hovermode</span><span class="o">=</span><span class="s1">&#39;closest&#39;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span>
    <span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">layout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">dd828eaec7bb</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">e1d718d650fd</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;values&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">utv</span>
       <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Stønadsområde&#39;</span>
       <span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
       <span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
      <span class="p">)</span>
<span class="n">fig</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">fef476a3c165</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">utv</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>        <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Stønadsområde&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>        <span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>        <span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>       <span class="p">)</span>

<span class="ne">NameError</span>: name &#39;utv&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span>
<span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">48</span><span class="n">cbd812406c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">e1d718d650fd</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;values&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">utv</span>
       <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Stønadsområde&#39;</span>
       <span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col</span>
       <span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">col</span>
      <span class="p">)</span>
<span class="n">fig</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="n">d28bd3d57244</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">utv</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>        <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Stønadsområde&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>        <span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>        <span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">col</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>       <span class="p">)</span>

<span class="ne">NameError</span>: name &#39;utv&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">13</span><span class="o">-</span><span class="mi">2657</span><span class="n">ff0947ac</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getOmråde</span><span class="p">(</span><span class="n">tekst</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tekst</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Arbeidsmarkedstiltak&#39;</span><span class="p">,</span><span class="s1">&#39;Ventelønn&#39;</span><span class="p">,</span><span class="s1">&#39;Dagpenger&#39;</span><span class="p">,</span><span class="s1">&#39;Lønnsgaranti&#39;</span><span class="p">,</span><span class="s1">&#39;Arbeidsavklaringspenger&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;Tilleggstønader tiltak, AAP og enslige&#39;</span><span class="p">,</span><span class="s1">&#39;Supplerende stønad&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;Arbeid&#39;</span>
    <span class="k">if</span> <span class="n">tekst</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Stønad til enslig mor eller far&#39;</span><span class="p">,</span><span class="s1">&#39;Foreldrepenger&#39;</span><span class="p">,</span><span class="s1">&#39;Kontantstøtte&#39;</span><span class="p">,</span><span class="s1">&#39;Barnetrygd&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;Familie&#39;</span>
    <span class="k">if</span> <span class="n">tekst</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Avtalefestet pensjon(AFP)&#39;</span><span class="p">,</span> <span class="s1">&#39;Krigspensjon&#39;</span><span class="p">,</span><span class="s1">&#39;Alderspensjon&#39;</span><span class="p">,</span><span class="s1">&#39;Ytelser til gjenlevende&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;Pensjon&#39;</span>
    <span class="k">if</span> <span class="n">tekst</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Sykepenger&#39;</span><span class="p">,</span> <span class="s1">&#39;Uføretrygd og yrkesskade&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;Helse&#39;</span>
    <span class="k">if</span> <span class="n">tekst</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Grunn- og hjelpestønad og hjelpemidler&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;Helse&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;Andre&#39;</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">getOmråde</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">36</span><span class="n">da76ecf433</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>     <span class="k">return</span> <span class="s1">&#39;Andre&#39;</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> 
<span class="ne">---&gt; </span><span class="mi">15</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">getOmråde</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_g</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span><span class="p">,</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">15</span><span class="o">-</span><span class="n">e6f7f7df49af</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_g</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span><span class="p">,</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span>
<span class="n">utv</span> <span class="o">=</span> <span class="n">df_g</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">16</span><span class="o">-</span><span class="mi">95</span><span class="n">af630b5cae</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Utbetalt til personer. Mill kr &#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df_g</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 

<span class="ne">NameError</span>: name &#39;df_g&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="n">utv</span> <span class="o">=</span> <span class="n">df_g</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">17</span><span class="o">-</span><span class="mi">0864</span><span class="n">dc658b62</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df_g</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 

<span class="ne">NameError</span>: name &#39;df_g&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Helse&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Helse: &#39;</span> <span class="o">+</span> <span class="n">col</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">18</span><span class="o">-</span><span class="mi">6</span><span class="n">c13e09c41e8</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Helse&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Arbeid&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plotTreemap</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">navBlaRod</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Arbeid: &#39;</span> <span class="o">+</span> <span class="n">col</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="n">a6d33cc37ee6</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">utv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;område&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Arbeid&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">utv</span><span class="p">[</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_nodes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">,</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df_groups</span> <span class="o">=</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_nodes</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
<span class="n">df_groups</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="mi">1</span><span class="n">c0c7f7ebf0c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_nodes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;område&#39;</span><span class="p">,</span><span class="s1">&#39;Stønadsområde&#39;</span><span class="p">,</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">df_groups</span> <span class="o">=</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;område&#39;</span><span class="p">)[</span><span class="s1">&#39;Statsregnskap. Mill kr  2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">df_groups</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_groups</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Bevilgning&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">c8527c56cede</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_groups</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Bevilgning&#39;</span>

<span class="ne">NameError</span>: name &#39;df_groups&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_nodes</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">22</span><span class="o">-</span><span class="n">e507715475a1</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;df_nodes&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_graph</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_groups</span><span class="p">,</span> <span class="n">df_nodes</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">23</span><span class="o">-</span><span class="n">e3199b0cf377</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_graph</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_groups</span><span class="p">,</span> <span class="n">df_nodes</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;df_groups&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#df_graph.sort_values(by = [&#39;target&#39;], ascending=[1], inplace=True)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">graph</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">from_pandas_edgelist</span><span class="p">(</span><span class="n">df_graph</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> 
    <span class="n">edge_attr</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">create_using</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">25</span><span class="o">-</span><span class="mi">792</span><span class="n">d846b1e4b</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">graph</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">G</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">from_pandas_edgelist</span><span class="p">(</span><span class="n">df_graph</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">edge_attr</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">create_using</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;df_graph&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="n">graph_values</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">26</span><span class="o">-</span><span class="mi">005</span><span class="n">ac33d1006</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">graph_values</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;G&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sources</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">targets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">targets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">27</span><span class="o">-</span><span class="mi">09</span><span class="n">a2c176d521</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">targets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">targets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

<span class="ne">NameError</span>: name &#39;graph_values&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_trace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;sankey&#39;</span><span class="p">,</span>
    <span class="n">orientation</span> <span class="o">=</span> <span class="s2">&quot;h&quot;</span><span class="p">,</span>
    <span class="c1">#valueformat = &quot;.0f&quot;,</span>
    <span class="c1">#valuesuffix = &quot;M&quot;,</span>
    <span class="n">node</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
      <span class="n">pad</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
      <span class="n">thickness</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
      <span class="n">line</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>
      <span class="p">),</span>
      <span class="n">label</span> <span class="o">=</span>  <span class="n">nodes</span><span class="p">,</span>
      <span class="n">color</span> <span class="o">=</span>  <span class="s1">&#39;#0067C5&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">hoverinfo</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>
    <span class="n">link</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
      <span class="n">source</span> <span class="o">=</span>  <span class="n">sources</span><span class="p">,</span>
      <span class="n">target</span> <span class="o">=</span>  <span class="n">targets</span><span class="p">,</span>
      <span class="n">value</span> <span class="o">=</span>  <span class="n">values</span><span class="p">,</span>
      <span class="n">label</span> <span class="o">=</span>  <span class="n">nodes</span><span class="p">,</span>
      <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#66CBEC&#39;</span>
  <span class="p">))</span>

<span class="n">layout</span> <span class="o">=</span>  <span class="nb">dict</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mi">800</span><span class="p">,</span>
    <span class="n">font</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
      <span class="n">size</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_trace</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">layout</span><span class="p">)</span>
<span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">28</span><span class="o">-</span><span class="n">c215079cc7cb</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>         <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>       <span class="p">),</span>
<span class="ne">---&gt; </span><span class="mi">13</span>       <span class="n">label</span> <span class="o">=</span>  <span class="n">nodes</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>       <span class="n">color</span> <span class="o">=</span>  <span class="s1">&#39;#0067C5&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="p">),</span>

<span class="ne">NameError</span>: name &#39;nodes&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-datapackage">
<h2>Create datapackage<a class="headerlink" href="#create-datapackage" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">readme</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">## Eksperimenter med visualisering av strømmer av penger og folk</span>

<span class="s2">#### Inspirasjon:</span>

<span class="s2">Mekanisk simulering av samfunnsøkonomi: </span>

<span class="s2">[youtube: MONIAC at NZ Reserve Bank](https://www.youtube.com/watch?v=rAZavOcEnLg).</span>

<span class="s2">[youtube: MONIAC at Cambridge](https://www.youtube.com/watch?v=rVOhYROKeu4).</span>

<span class="s2">Visualisering av strømmer av hendelser:</span>

<span class="s2">[EventFlow: Visual Analysis of Temporal Event Sequences](https://hcil.umd.edu/eventflow/)</span>

<span class="s2">[event-flow js (github)](https://williaster.github.io/data-ui/?selectedKind=event-flow&amp;selectedStory=manyEventTypes&amp;full=0&amp;addons=0&amp;stories=1&amp;panelRight=0).</span>


<span class="s2">&quot;&quot;&quot;</span>

<span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;store&#39;</span><span class="p">:</span> <span class="s1">&#39;gs&#39;</span><span class="p">,</span>
<span class="s1">&#39;repo&#39;</span><span class="p">:</span> <span class="s1">&#39;https://raw.githubusercontent.com/datasett/nav-examples/master&#39;</span><span class="p">,</span>
<span class="s1">&#39;readme&#39;</span><span class="p">:</span> <span class="n">readme</span><span class="p">,</span>
<span class="s1">&#39;license&#39;</span><span class="p">:</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
<span class="s1">&#39;accessRights&#39;</span><span class="p">:</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span>
<span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="s1">&#39;paul.bencze@nav.no&#39;</span><span class="p">,</span>
<span class="s1">&#39;description&#39;</span><span class="p">:</span><span class="s1">&#39;NAV i tall: eksperimenter med datavisualisering&#39;</span><span class="p">,</span>
<span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;NAV i tall: eksperimenter med datavisualisering&#39;</span><span class="p">,</span>
<span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;NAV i tall: eksperimenter med datavisualisering&#39;</span><span class="p">,</span>
<span class="s1">&#39;source&#39;</span><span class="p">:</span><span class="s1">&#39;NAV&#39;</span><span class="p">,</span>
<span class="s1">&#39;keywords&#39;</span><span class="p">:[</span><span class="s1">&#39;example&#39;</span><span class="p">],</span>
<span class="s1">&#39;provenance&#39;</span><span class="p">:</span><span class="s1">&#39;Examples&#39;</span><span class="p">,</span>
<span class="s1">&#39;publisher&#39;</span><span class="p">:</span> <span class="s1">&#39;NAV&#39;</span><span class="p">,</span> 
<span class="s1">&#39;bucket&#39;</span><span class="p">:</span> <span class="s1">&#39;nav-opendata&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dp</span> <span class="o">=</span> <span class="n">dv</span><span class="o">.</span><span class="n">Datapackage</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- Missing recommended prop(s): [&#39;contactPoint&#39;, &#39;distribution&#39;, &#39;keyword&#39;, &#39;spatial&#39;, &#39;temporal&#39;, &#39;theme&#39;] 
- Prop(s) not in DCAT schema: [&#39;store&#39;, &#39;repo&#39;, &#39;readme&#39;, &#39;license&#39;, &#39;author&#39;, &#39;name&#39;, &#39;keywords&#39;, &#39;bucket&#39;] 
- keywords:
	- expected: str 
	- got: list 
- publisher:
	- expected: dict 
	- got: str 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">NB. figuren er ikke komplett eller korrekt</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">dp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">spec_type</span><span class="o">=</span><span class="s1">&#39;plotly&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bevilgninger fordelt på områder&#39;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Bevilgninger fordelt på områder&#39;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="p">,</span>
    <span class="n">resources</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;Kilde: NAV Statistikk samt egne beregninger&quot;</span><span class="p">,</span>
    <span class="n">spec</span><span class="o">=</span><span class="n">plio</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">31</span><span class="o">-</span><span class="mi">3</span><span class="n">d4a38e96943</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="n">resources</span><span class="o">=</span><span class="p">[],</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;Kilde: NAV Statistikk samt egne beregninger&quot;</span><span class="p">,</span>
<span class="ne">---&gt; </span><span class="mi">12</span>     <span class="n">spec</span><span class="o">=</span><span class="n">plio</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> <span class="p">)</span>

<span class="ne">NameError</span>: name &#39;fig&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#GOOGLE_APPLICATION_CREDENTIALS environment variable must be defined before initializing the client</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">dv</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">client</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">33</span><span class="o">-</span><span class="n">ff5e2c89975a</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">client</span> <span class="o">=</span> <span class="n">dv</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">client</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/dataverk/dataverk.py</span> in <span class="ni">__init__</span><span class="nt">(self, resource_path, env_file, auth_token)</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_path</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">env_file</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span>         <span class="n">env_store</span> <span class="o">=</span> <span class="n">EnvStore</span><span class="o">.</span><span class="n">safe_create</span><span class="p">(</span><span class="n">env_file</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">17</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">DataverkContext</span><span class="p">(</span><span class="n">env_store</span><span class="p">,</span> <span class="n">resource_path</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> 
<span class="g g-Whitespace">     </span><span class="mi">19</span>     <span class="nd">@property</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/dataverk/dataverk_context.py</span> in <span class="ni">__init__</span><span class="nt">(self, env_store, resource_path, auth_token)</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_http_headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_http_headers</span><span class="p">(</span><span class="n">auth_token</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_env_store</span> <span class="o">=</span> <span class="n">env_store</span>
<span class="ne">---&gt; </span><span class="mi">14</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_settings_store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_settings</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_load_and_apply_secrets</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> 

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/dataverk/dataverk_context.py</span> in <span class="ni">_load_settings</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span> 
<span class="g g-Whitespace">     </span><span class="mi">21</span>     <span class="k">def</span> <span class="nf">_load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">22</span>         <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">file_functions</span><span class="o">.</span><span class="n">get_package_resource</span><span class="p">(</span><span class="s2">&quot;settings.json&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_headers</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> 
<span class="g g-Whitespace">     </span><span class="mi">24</span>     <span class="k">def</span> <span class="nf">_load_and_apply_secrets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/dataverk/utils/file_functions.py</span> in <span class="ni">get_package_resource</span><span class="nt">(resource_name, base_path, http_headers)</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span>                 <span class="k">return</span> <span class="n">bucket_conn</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">resource_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">30</span>             <span class="k">else</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">31</span>                 <span class="k">return</span> <span class="n">read_file</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">resource_name</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span> 
<span class="g g-Whitespace">     </span><span class="mi">33</span> 

<span class="nn">~/anaconda3/envs/dv/lib/python3.7/site-packages/dataverk/utils/file_functions.py</span> in <span class="ni">read_file</span><span class="nt">(path)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> 
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">47</span>     <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>         <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span> 

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;settings.json&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dv"
        },
        kernelOptions: {
            kernelName: "dv",
            path: "./plotly/excel"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dv'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../dash/dash.html" title="previous page">Dash example</a>
    <a class='right-next' id="next-link" href="../express/plotly_express_samples.html" title="next page">Plotly express examples</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By deetly<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>